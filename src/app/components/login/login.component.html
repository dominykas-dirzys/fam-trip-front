<app-page-title>{{ isLoginMode ? 'Login' : 'Sign Up' }}</app-page-title>

<div *ngIf="isLoading" style="text-align: center;">
  <app-loading-spinner></app-loading-spinner>
</div>
<form [formGroup]="form" class="login-form" *ngIf="!isLoading">
  <div>
    <mat-form-field>
      <mat-label>Email</mat-label>
      <input
        matInput
        required
        email
        autocomplete="off"
        formControlName="email"
      />
      <mat-error *ngIf="email.errors?.minlength">
        At least 3 characters are required
      </mat-error>
      <mat-error *ngIf="email.errors?.email">
        Email must be valid
      </mat-error>
      <mat-error *ngIf="email.errors?.required">
        Username is required
      </mat-error>
    </mat-form-field>
  </div>
  <div>
    <mat-form-field>
      <mat-label>Password</mat-label>
      <input
        matInput
        required
        autocomplete="off"
        formControlName="password"
        type="password"
      />
      <mat-error *ngIf="password.errors?.minlength">
        At least 6 characters are required
      </mat-error>
      <mat-error *ngIf="password.errors?.required">
        Password is required
      </mat-error>
    </mat-form-field>
  </div>
  <div class="form-buttons">
    <button mat-raised-button type="button" (click)="form.reset({})">Reset</button>
    <button mat-raised-button
            color="primary"
            type="submit"
            [disabled]="form.invalid"
            (click)="login()"
            *ngIf="isLoginMode">
      Login
    </button>
    <button mat-raised-button
            color="primary"
            type="submit"
            [disabled]="form.invalid"
            (click)="signup()"
            *ngIf="!isLoginMode">
      Sign Up
    </button>
    <button mat-raised-button
            type="button"
            (click)="onSwitchMode()">
      Switch To {{ isLoginMode ? 'Sign Up' : 'Login' }}
    </button>
  </div>
</form>
